(self.webpackChunkse_tools=self.webpackChunkse_tools||[]).push([[0,143],{6182:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(8152),r=n(7294),i=n(9804),o=n(6838),l=n(7484),c=n(3943),s=n(6839),m=n(9810),u={IMAGE:/(png|PNG|jpe?g|JPE?G|bmp|BMP|gif|GIF)/};function d(e){var t=e.data.Pictures,n=(0,r.useState)(e.index),d=(0,a.Z)(n,2),f=d[0],p=d[1],v=(0,r.useState)(e.data),w=(0,a.Z)(v,2),E=w[0],h=w[1],C=null==t?void 0:t.length,g=t[f],N=(0,r.useRef)(null),b=function(){return f>0},k=function(){return f<C-1},I=function(){N.current&&N.current.handleDefaultClick(),p(f-1)},P=function(){N.current&&N.current.handleDefaultClick(),p(f+1)},S=function(t){var n=t.which;"textarea"!==t.target.type&&(27===n?e.onCancel(t):37!==n&&38!==n||!b()?39!==n&&40!==n||!k()||P():I())};(0,r.useEffect)((function(){return window.addEventListener("keyup",S),function(){window.removeEventListener("keyup",S)}}),[]);var T=function(e){var t=l(e);return function(e){return t.isValid()&&t.format(e)}};function U(){var t=g.leftTopTitle;return!e.onlyImage&&r.createElement("div",{className:"se-file-preview-header"},r.createElement("span",{title:t},t.length>20?"".concat(t.substr(0,8),"...").concat(t.substr(t.length-6)):t),C>0&&t&&r.createElement("span",{className:"se-file-preview-header-separator"},"|"),!e.isShowCreateUser&&(g.CreateUserName||e.data.CreateUserName)&&r.createElement(r.Fragment,null,r.createElement(i.Z,{type:"user",className:"se-file-preview-header-uploader-icon"}),r.createElement("span",{className:"se-file-preview-header-uploader"},g.CreateUserName||e.data.CreateUserName)),(g.CreateTime||g.UploadTime)&&r.createElement(r.Fragment,null,r.createElement("span",{className:"se-file-preview-header-date"},"上传于",T(g.CreateTime||g.UploadTime)("YYYY年MM月DD日")),r.createElement("span",{className:"se-file-preview-header-time"},T(g.CreateTime||g.UploadTime)("HH:mm"))))}function Z(){if(e.onlyImage)return null;var t=C>0?g.Content:E.Content;if(!e.editable&&!t)return r.createElement("div",{style:{height:"40px"}});var n={minRows:1},a="se-file-preview-caption-noImg";return C>0&&(n.maxRows=2,a="se-file-preview-caption"),r.createElement("div",{className:a},r.createElement(o.Z.TextArea,{disabled:!e.editable,autoSize:n,placeholder:e.editable?e.hintText:"",value:t,onChange:function(e){var t=E.setIn(["Pictures",f,"Content"],e.target.value);h(t)},onBlur:function(t){t.stopPropagation();var n=C>0?g.Content:e.data.get("Content");t.target.value!==n&&e.onCaptionChange(E,f)}}))}return r.createElement("div",{className:"se-file-preview"},r.createElement("div",{className:"se-file-preview-background"},r.createElement("div",{className:"preview-close"},r.createElement("em",{className:"icon-close",onClick:e.onCancel})),r.createElement(U,null),r.createElement(Z,null),r.createElement("div",{className:"se-file-preview-content"},r.createElement("div",{className:"se-file-preview-content-arrow"},b()&&r.createElement("em",{className:"icon-arrow-left arrow",onClick:I})),r.createElement("div",{className:"se-file-preview-content-preview"},0!==C&&r.createElement("div",{className:"se-file-preview-content-preview-bg"},function(){var t=g.url,n=g.PictureId,a=g.FileName,i=g.PictureUrl,o=g.DownloadName,l=g.PictureContent,d=g.ImageContent,f=t||"".concat(window.__options.APIBasePath,"/common/file/download/").concat(n,"?fileName=").concat(encodeURIComponent(a)),p=t||"".concat(window.__options.APIBasePath,"/common/file/download/").concat(n,"?fileName=").concat(encodeURIComponent(o),"&openWith=download");i&&(p="");var v=(null==a?void 0:a.replace(/.+\./,"").toLowerCase())||"png";return"pdf"===v||"pdf"===e.filetype?r.createElement(c.default,{url:f}):u.IMAGE.test(v)?r.createElement(s.Z,{ref:N,isShowBgcLink:t,url:i,imageId:n,imageContent:l,pictureContent:d,link:p}):r.createElement(m.Z,{url:p})}()),C>0&&r.createElement("div",{className:"se-file-preview-content-preview-num"},f+1,"/",C)),r.createElement("div",{className:"se-file-preview-content-arrow"},k()&&r.createElement("em",{className:"icon-arrow-right arrow",onClick:P})))))}d.defaultProps={index:0,isShowCreateUser:!1,hintText:"点击添加日志内容",editable:!1,onlyImage:!1,data:{},onCancel:function(){console.info("ImagesView's function 'onCancel' is undefined.")},onCaptionChange:function(){}};const f=d},3943:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var a,r=n(7462),i=n(8152),o=n(7294),l=n(5554),c=n(6482),s=n(1382),m=n(642),u=n(9092),d=null===(a=window.__options)||void 0===a?void 0:a.publicPath;function f(e){var t=e.url,n=e.pdfworkerPath,a=(0,o.useState)(1),d=(0,i.Z)(a,2),f=d[0],p=d[1],v=(0,o.useState)(0),w=(0,i.Z)(v,2),E=w[0],h=w[1],C=(0,o.useState)(document.body.clientWidth-296),g=(0,i.Z)(C,2),N=g[0],b=g[1],k={CUSTOMERID:u.pR.get("CUSTOMERID")},I=(0,o.useState)({url:t,httpHeaders:k,withCredentials:!0}),P=(0,i.Z)(I,2),S=P[0],T=P[1];n&&(l.v0.GlobalWorkerOptions.workerSrc=n);var U=function(){return b(document.body.clientWidth-296)};(0,o.useEffect)((function(){return window.addEventListener("resize",U),function(){return window.removeEventListener("resize",U)}}),[]),(0,o.useEffect)((function(){p(1),h(0),T({url:t,httpHeaders:k,withCredentials:!0})}),[t]);var Z=(0,u.OE)("se-pdf-preview",e);return o.createElement("div",(0,r.Z)({},e,{className:Z}),o.createElement(l.BB,{file:S,className:"se-pdf-preview-document",onLoadSuccess:function(e){var t=e.numPages;return h(t)},onLoadError:function(){return c.Z.error("加载失败，请刷新页面后重试")},loading:o.createElement(s.Z,{size:"large",tip:"正在努力加载中"})},o.createElement(l.T3,{pageNumber:f,width:N,scale:1})),o.createElement("div",{className:"se-pdf-preview-footer"},0!==E&&o.createElement(m.Z,{onChange:function(e){return p(e)},total:10*E,current:f})),o.createElement("a",{className:"operation-btn",title:"下载",href:t},o.createElement("em",{className:"icon-download",color:"white"})))}l.v0.GlobalWorkerOptions.workerSrc=d?"".concat(d,"/library/pdfworker.js"):"//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(l.v0.version,"/pdf.worker.min.js");const p=o.memo(f)},4601:()=>{},2767:()=>{},8251:()=>{},7677:()=>{},1543:()=>{},7324:()=>{}}]);